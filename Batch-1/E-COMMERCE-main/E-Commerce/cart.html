<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>CartDetails Page</title>
        <link
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
            rel="stylesheet" />
        <link rel="stylesheet" href="style.css" />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            #container {
                width: 80%;
                margin: 50px auto;
            }

            #container div {
                display: flex;
                flex-wrap: wrap;
                border: 1px dotted grey;
                width: 100%;
                align-items: center;
                padding: 20px;
                margin-bottom: 5px;
                justify-content: space-around;
            }

            #container div img {
                width: 5%;
                aspect-ratio: 6/5;
            }
            h5 {
                width: 25%;
            }
            .qtyDiv {
                display: flex;
                flex-wrap: wrap;
                border: 1px solid rgba(128, 128, 128, 0.47);
                justify-content: space-around;
            }
            .qtyDiv button {
                padding: 6px 15px;
                border: none;
            }
            .delbtn {
                padding: 6px 10px;
                background-color: rgb(222, 12, 12);
                color: white;
                border: none;
            }
            #card_total {
                width: 80%;
                justify-content: space-between;
                display: flex;
                flex-wrap: wrap;
                margin: 20px auto;
                gap: 40px;
            }

            .amount_card {
                display: flex;

                gap: 120px;
                justify-content: space-between;
            }

            #crp {
                border-bottom: 1px dotted grey;
            }

            .btncheck {
                width: 100%;
                margin-top: 10px;
                border: none;
                padding: 10px;
                background-color: #333333;
                color: white;
                text-transform: uppercase;
            }
            .btncheck:hover {
                background-color: #f1800f;
                transition: 0.3s ease-out;
            }
            .btncheck a{
                color: white;
                text-decoration: none;
            }
            .coupan input {
                padding: 8px;
                border: 0.5px solid rgba(128, 128, 128, 0.386);
                border-radius: 5px;
            }

            .coupan button {
                padding: 8px 12px;
                border: none;
            }

            .coupan a:hover {
                color: #f1800f;
                transition: 0.3s ease-out;
            }

            #total1{
                font-weight: 800;
                font-size: 20px;
                color: rgb(17, 15, 15);
            }

            .desc1{
                width: 25%;
            }

                    /* Media queries for responsiveness */
            @media screen and (max-width: 768px) {
                #container div {
                    width: 100%;
                     /* Each div occupies 40% of the container width on screens up to 768px wide */
                }
                .description{
                    display: none;
                }
            }

            @media screen and (max-width: 480px) {
                #container div {
                    width: 100%; /* Each div occupies 100% of the container width on screens up to 480px wide */
                }
                #card_total{
                    width: 75%;
                    margin: auto;
                }
                .description{
                    display: none;
                }
            }
        </style>
    </head>
    <body>
        <div class="main-navbar shadow-sm sticky-top">
            <div class="top-navbar">
                <div class="container-fluid">
                    <div class="row">
                        <div
                            class="col-md-2 my-auto d-none d-sm-none d-md-block d-lg-block">
                            <h6 class="brand-name">Funda Ecom</h6>
                        </div>
                        <div class="col-md-5 my-auto">
                            <form role="search">

                            </form>
                        </div>
                        <div class="col-md-5 my-auto">
                            <ul class="nav justify-content-end">
                                <li class="nav-item">
                                    <a class="nav-link" id="cartpage" href="#">
                                        <i class="fa fa-shopping-cart"></i> Cart
                                        <span id="cart">0</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">
                                        <i class="fa fa-heart"></i> Wishlist (0)
                                    </a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a
                                        class="nav-link dropdown-toggle"
                                        href="#"
                                        id="navbarDropdown"
                                        role="button"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fa fa-user"></i> Username
                                    </a>
                                    <ul
                                        class="dropdown-menu"
                                        aria-labelledby="navbarDropdown">
                                        <li>
                                            <a class="dropdown-item" href="#"
                                                ><i class="fa fa-user"></i>
                                                Profile</a
                                            >
                                        </li>

                                        <li>
                                            <a class="dropdown-item" href="#"
                                                ><i class="fa fa-list"></i> My
                                                Orders</a
                                            >
                                        </li>

                                        <li>
                                            <a class="dropdown-item" href="#"
                                                ><i class="fa fa-heart"></i> My
                                                Wishlist</a
                                            >
                                        </li>
                                        <li>
                                            <a class="dropdown-item" href="#"
                                                ><i
                                                    class="fa fa-shopping-cart"></i>
                                                My Cart</a
                                            >
                                        </li>
                                        <li>
                                            <a class="dropdown-item" href="#"
                                                ><i class="fa fa-sign-out"></i>
                                                Logout</a
                                            >
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <a
                        class="navbar-brand d-block d-sm-block d-md-none d-lg-none"
                        href="#">
                        Funda Ecom
                    </a>
                    <button
                        class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent"
                        aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div
                        class="collapse navbar-collapse"
                        id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">All Categories</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">New Arrivals</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"
                                    >Featured Products</a
                                >
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Electronics</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Fashions</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Accessories</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Appliances</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div id="container"></div>
        <div id="card_total">
            <div class="coupan">
                <input type="text" placeholder="Enter Your Coupan" />
                <button>Apply</button>
            </div>
            <div id="amount_card">
                <div class="amount_card">
                    <p>Card Sub Total</p>
                    <p id="total">Total</p>
                </div>
                <div class="amount_card">
                    <p>Shipping</p>
                    <p>Free</p>
                </div>
                <div class="amount_card" id="crp">
                    <p>You save</p>
                    <p>$:20</p>
                </div>
                <div class="amount_card">
                    <h5>you pay</h5>
                    <p id="total1">$: total</p>
                </div>

            <button class="btncheck"> <a  href="payment.html" >ChecKout</a></button>
            </div>
        </div>

        <section>
            <div class="footer">
    <div class="footer-links">
        <ul>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">FAQs</a></li>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy Policy</a></li>
        </ul>
    </div>
    <div class="social-links">
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-instagram"></i></a>
        <a href="#"><i class="fa fa-linkedin"></i></a>
    </div>
    <p style="font-size: 18px;">&copy; 2024 E-Commerce Store. All rights reserved.</p>
</div>

        </section>



        <script>
            let container = document.getElementById("container");
            let cart = JSON.parse(localStorage.getItem("eshopCart")) || [];
            console.log(cart, "156");

            function showData(data) {
                container.innerHTML = " ";
                data.map((item, index) => {
                    if (!item.Quantity || item.Quantity < 1) {
                        item.Quantity = 1;
                    }
                    let div = document.createElement("div");

                    let img = document.createElement("img");
                    img.src = item.images[0];

                let desc1 = document.createElement("span")
                desc1.classList.add("desc1")

                    let title = document.createElement("h5");
                    title.innerText = item.title;

                    let description  = document.createElement("P")
                    description.classList.add("description")
                    description = item.description.split(" ").slice(0, 7).join(" ") +
                        " ...";

                    let price = document.createElement("p");
                    price.innerText = `$ ${item.price}`;

                    let qtyDiv = document.createElement("span");
                    qtyDiv.classList.add("qtyDiv");
                    let minusBtn = document.createElement("button");
                    minusBtn.innerText = "-";
                    minusBtn.addEventListener("click", () => {
                        if (item.Quantity > 1) {
                            item.Quantity--;
                            qty.innerText = item.Quantity;
                            showData(cart);
                            sum_amount();
                        }
                    });
                    let qty = document.createElement("button");
                    qty.innerText = item.Quantity;
                    let plusBtn = document.createElement("button");
                    plusBtn.innerText = "+";
                    plusBtn.addEventListener("click", () => {
                        if (item.Quantity <= 9) {
                            item.Quantity++;
                            qty.innerText = item.Quantity;
                            showData(cart);
                        }

                        sum_amount();
                    });

                    let total = document.createElement("p");
                    total.innerText = `Total $ : ${item.price * item.Quantity}`;

                    let delbtn = document.createElement("button");
                    delbtn.innerText = "Delete";
                    delbtn.classList.add("delbtn");
                    delbtn.addEventListener("click", () => {
                        delData(cart, index);
                        showData(cart);
                        sum_amount();
                        updatedCartQuantity();
                    });
                    desc1.append(title,description)
                    qtyDiv.append(minusBtn, qty, plusBtn);
                    div.append(img, desc1, price, qtyDiv, total, delbtn);
                    container.append(div);
                });
                localStorage.setItem("eshopCart", JSON.stringify(cart));
            }

            function delData(data, index) {
                data.splice(index, 1);
                localStorage.setItem("eshopCart", JSON.stringify(data));
            }

            showData(cart);

            function sum_amount() {
                let total = document.getElementById("total");
                let sum = 0;
                for (let i = 0; i < cart.length; i++) {
                    sum = sum + cart[i].price * cart[i].Quantity;
                }

                total.innerText = `$ : ${sum}`;


                let total1 = document.getElementById("total1");
                let sum1 = 0;
                    for (let i = 0; i < cart.length; i++) {
                    sum1 = sum1 + cart[i].price * cart[i].Quantity;
                    total2 =sum1-20;
                }

                total1.innerText = `$ : ${total2}`;

            }
            sum_amount();

            function updatedCartQuantity() {
                let cartCount = document.getElementById("cart");
                cartCount.innerText = cart.length;
                console.log(cart.length, "209");
            }
            updatedCartQuantity();
        </script>
    </body>
</html>
