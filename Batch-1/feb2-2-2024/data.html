<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" />
        <title>Home Page</title>
    </head>
    <body>
        <div id="create">
            <h1>Create a New Task</h1>
            <form>
                <!-- Use this form for data input  -->
                <input type="text" id="name" placeholder="Task Name" />
                <select id="type">
                    <option value="">Select Task Type</option>
                    <option value="Assignment">Assignment</option>
                    <option value="Evaluation">Evaluation</option>
                    <option value="Quiz">Quiz</option>
                </select>
                <label for="">Date:- </label>
                <input type="date" id="date" />
                <select id="priority">
                    <option value="">Select Priority</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="Urgent">Urgent</option>
                </select>
                <input type="submit" value="Submit" />
            </form>
        </div>

        <table id="data_table"></table>
    </body>
    <!-- <script>
        let form = document.querySelector("form");
        let allData = JSON.parse(localStorage.getItem("userData")) || [];
        //  let allData=[]
        form.addEventListener("submit", function (event) {
            event.preventDefault();

            let name = document.getElementById("name").value;
            let date = document.getElementById("date").value;
            let priority = document.getElementById("priority").value;
            let type = document.getElementById("type").value;
            const data = {
                name: name,
                date: date,
                priority: priority,
                type: type,
            };
            allData.push(data);
            localStorage.setItem("userData", JSON.stringify(allData));
            console.log(allData);
            form.reset();
        });

        let data_table = document.getElementById("data_table");
        let caption = document.createElement("caption");
        caption.innerText = "Employee Details Table";
        let head = document.createElement("thead");
        let tr = document.createElement("tr");
        let th1 = document.createElement("th");
        th1.innerText = "Sr.No";
        let th2 = document.createElement("th");
        th2.innerText = "Name";
        let th3 = document.createElement("th");
        th3.innerText = "Task Name";
        let th4 = document.createElement("th");
        th4.innerText = "Priority";
        let th5 = document.createElement("th");
        th5.innerText = "Date";
        let th6 = document.createElement("th");
        th6.innerText = "Status";
        tr.append(th1, th2, th3, th4, th5, th6);
        head.append(tr);

        let tbody = document.createElement("tbody");

        allData.map((item, index) => {
            index++;
            console.log(item, index);
            let row = document.createElement("tr");
            let sr = document.createElement("td");
            sr.innerText = index;
            let td1 = document.createElement("td");
            td1.innerText = item.name;
            let td2 = document.createElement("td");
            td2.innerText = item.type;
            let td3 = document.createElement("td");
            td3.innerText = item.priority;
            let td4 = document.createElement("td");
            td4.innerText = item.date;
            let td10 = document.createElement("td");
            if (item.priority === "Low") {
                td10.innerText = "completed";
            } else {
                td10.innerText = "Incompleted";
            }
            row.append(sr, td1, td2, td3, td4, td10);
            tbody.append(row);
            data_table.append(head, tbody);
        });

    </script> -->

<script>
    function renderTable() {
    let allData = JSON.parse(localStorage.getItem("userData")) || [];
    let data_table = document.getElementById("data_table");
    data_table.innerHTML = ''; // Clear existing table content
    let caption = document.createElement("caption");
    caption.innerText = "Employee Details Table";
    let head = document.createElement("thead");
    let tr = document.createElement("tr");
    let th1 = document.createElement("th");
    th1.innerText = "Sr.No";
    let th2 = document.createElement("th");
    th2.innerText = "Name";
    let th3 = document.createElement("th");
    th3.innerText = "Task Name";
    let th4 = document.createElement("th");
    th4.innerText = "Priority";
    let th5 = document.createElement("th");
    th5.innerText = "Date";
    let th6 = document.createElement("th");
    th6.innerText = "Status";
    tr.append(th1, th2, th3, th4, th5, th6);
    head.append(tr);

    let tbody = document.createElement("tbody");
    allData.map((item, index) => {
        index++;
        let row = document.createElement("tr");
        let sr = document.createElement("td");
        sr.innerText = index;
        let td1 = document.createElement("td");
        td1.innerText = item.name;
        let td2 = document.createElement("td");
        td2.innerText = item.type;
        let td3 = document.createElement("td");
        td3.innerText = item.priority;
        let td4 = document.createElement("td");
        td4.innerText = item.date;
        let td10 = document.createElement("td");
        if (item.priority === "Low") {
            td10.innerText = "completed";
        } else {
            td10.innerText = "Incompleted";
        }
        row.append(sr, td1, td2, td3, td4, td10);
        tbody.append(row);
    });

    data_table.append(caption, head, tbody);
}

// Call renderTable when the page loads
document.addEventListener("DOMContentLoaded", renderTable);

let form = document.querySelector("form");

form.addEventListener("submit", function (event) {
    event.preventDefault();

    let name = document.getElementById("name").value;
    let date = document.getElementById("date").value;
    let priority = document.getElementById("priority").value;
    let type = document.getElementById("type").value;
    const data = {
        name: name,
        date: date,
        priority: priority,
        type: type,
    };
    let allData = JSON.parse(localStorage.getItem("userData")) || [];
    allData.push(data);
    localStorage.setItem("userData", JSON.stringify(allData));
    console.log(allData);
    form.reset();

    // Render the table after submitting new data
    renderTable();
});

</script>

    </html>
